<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Neuroblast Models — Interactive Grid</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#0f1115; --panel:#151925; --ink:#eef2ff; --muted:#9aa4b2;
      --nb:#1b9e77; --gmc:#d95f02; --im:#7570b3; --mat:#e7298a;
      --accent:#3b82f6; --border:#253049;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
      color:var(--ink); background:linear-gradient(180deg,#0e1116,#0b0e14);
    }
    header{
      padding:18px 22px; border-bottom:1px solid var(--border);
      display:flex; gap:16px; align-items:center; justify-content:space-between;
    }
    header h1{margin:0; font-size:18px; font-weight:600}
    header .actions{display:flex; gap:8px; align-items:center}
    button, .btn{
      background:var(--accent); color:white; border:none; padding:8px 12px;
      border-radius:10px; cursor:pointer; font-weight:600;
      box-shadow:0 5px 20px rgba(59,130,246,.25);
    }
    button.secondary{
      background:#1f2937; color:#e5e7eb; box-shadow:none; border:1px solid var(--border);
    }
    button:disabled{opacity:.6; cursor:not-allowed}
    main{padding:18px; display:grid; grid-template-columns: 1fr 320px; gap:18px;}
    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      grid-auto-rows: 220px;
      gap:12px;
    }
    .cell{
      background:var(--panel); border:1px solid var(--border);
      border-radius:14px; padding:10px; position:relative; overflow:hidden;
    }
    .cell h3{
      position:absolute; top:6px; left:10px; margin:0; font-size:12px; color:var(--muted); font-weight:600;
    }
    .row-title{
      grid-column: 1 / -1; margin:2px 0 6px; color:var(--muted); font-weight:700; letter-spacing:.02em;
    }
    svg{width:100%; height:100%;}
    .legend{
      display:flex; gap:14px; align-items:center; color:var(--muted); font-size:12px; padding:6px 0 10px;
    }
    .chip{display:inline-flex; gap:6px; align-items:center}
    .dot{width:10px; height:3px; border-radius:2px; background:currentColor}
    .controls{
      display:flex; flex-direction:column; gap:12px;
      position:sticky; top:12px; height:fit-content;
      background:var(--panel); border:1px solid var(--border); border-radius:14px; padding:12px;
    }
    .controls h2{margin:0 0 6px; font-size:14px}
    .model-block{
      border:1px solid var(--border); border-radius:12px; padding:10px; background:#111726;
      display:flex; flex-direction:column; gap:10px;
    }
    .model-block h3{margin:0; font-size:13px}
    .fields{display:grid; grid-template-columns: 1fr 1fr; gap:8px}
    .field{display:flex; flex-direction:column; gap:4px}
    .field label{font-size:12px; color:var(--muted)}
    .field input{
      background:#0c1220; color:var(--ink); border:1px solid var(--border);
      border-radius:10px; padding:8px 10px; font-weight:600;
    }
    .inline{
      display:flex; gap:8px; align-items:center; justify-content:space-between;
    }
    .tiny{font-size:12px; color:var(--muted)}
    .muted{color:var(--muted)}
    .badge{
      display:inline-block; padding:2px 6px; border-radius:8px; background:#0b1222; border:1px solid var(--border);
      font-size:11px; color:#cbd5e1; font-weight:600;
    }
    .titlebar{
      display:flex; align-items:center; justify-content:space-between; margin:2px 0 10px;
    }
    .share{display:flex; gap:8px}
    .help{font-size:12px; color:var(--muted)}
    @media (max-width: 1100px){
      main{grid-template-columns: 1fr}
      .controls{position:static}
    }
  </style>
</head>
<body>
  <header>
    <h1>Neuroblast models — interactive grid</h1>
    <div class="actions">
      <button class="secondary" id="reset">Reset to paper defaults</button>
      <button id="shareAll">Share current setup</button>
    </div>
  </header>

  <main>
    <!-- LEFT: PLOTS -->
    <section>
      <div class="titlebar">
        <div class="legend">
          <span class="chip" style="color:var(--nb)"><span class="dot"></span> NB</span>
          <span class="chip" style="color:var(--gmc)"><span class="dot"></span> GMC</span>
          <span class="chip" style="color:var(--im)"><span class="dot"></span> Im</span>
          <span class="chip" style="color:var(--mat)"><span class="dot"></span> Mat</span>
          <span class="badge">Time: 0–48 h</span>
        </div>
        <div class="help">Click “Run row” on the right to recompute a model across genotypes.</div>
      </div>

      <!-- grid labels -->
      <div class="row-title">WT • mud mutant • nanobody</div>
      <div id="grid" class="grid" aria-label="plots grid"></div>
    </section>

    <!-- RIGHT: CONTROLS -->
    <aside class="controls">
      <h2>Controls</h2>

      <!-- Model 1 -->
      <div class="model-block" data-model="1">
        <h3>Model 1 <span class="muted">— static thresholds</span></h3>
        <div class="fields">
          <div class="field">
            <label>symmetry (WT/mud/nano)</label>
            <input type="text" data-key="m1_sym" value="0,0.15,0.15">
          </div>
          <div class="field">
            <label>NB base scale (WT/mud/nano)</label>
            <input type="text" data-key="m1_scale" value="1,1,0.8">
          </div>
        </div>
        <div class="inline">
          <button data-run="1">Run row</button>
          <div class="share">
            <button class="secondary tiny" data-share="1">Share row</button>
          </div>
        </div>
      </div>

      <!-- Model 2 -->
      <div class="model-block" data-model="2">
        <h3>Model 2 <span class="muted">— sym pulls threshold</span></h3>
        <div class="fields">
          <div class="field">
            <label>symmetry (WT/mud/nano)</label>
            <input type="text" data-key="m2_sym" value="0,0.15,0.15">
          </div>
          <div class="field">
            <label>NB base scale (WT/mud/nano)</label>
            <input type="text" data-key="m2_scale" value="1,1,0.8">
          </div>
        </div>
        <div class="inline">
          <button data-run="2">Run row</button>
          <button class="secondary tiny" data-share="2">Share row</button>
        </div>
      </div>

      <!-- Model 3 -->
      <div class="model-block" data-model="3">
        <h3>Model 3 <span class="muted">— vol-scaled growth</span></h3>
        <div class="fields">
          <div class="field">
            <label>α (growth exponent)</label>
            <input type="number" step="0.1" data-key="m3_alpha" value="3">
          </div>
          <div class="field">
            <label>symmetry (WT/mud/nano)</label>
            <input type="text" data-key="m3_sym" value="0,0.15,0.15">
          </div>
          <div class="field">
            <label>NB base scale (WT/mud/nano)</label>
            <input type="text" data-key="m3_scale" value="1,1,0.8">
          </div>
        </div>
        <div class="inline">
          <button data-run="3">Run row</button>
          <button class="secondary tiny" data-share="3">Share row</button>
        </div>
      </div>

      <!-- Model 4 -->
      <div class="model-block" data-model="4">
        <h3>Model 4 <span class="muted">— vol-scaled + sym-thresh</span></h3>
        <div class="fields">
          <div class="field">
            <label>α (growth exponent)</label>
            <input type="number" step="0.1" data-key="m4_alpha" value="3">
          </div>
          <div class="field">
            <label>symmetry (WT/mud/nano)</label>
            <input type="text" data-key="m4_sym" value="0,0.15,0.15">
          </div>
          <div class="field">
            <label>NB base scale (WT/mud/nano)</label>
            <input type="text" data-key="m4_scale" value="1,1,0.8">
          </div>
        </div>
        <div class="inline">
          <button data-run="4">Run row</button>
          <button class="secondary tiny" data-share="4">Share row</button>
        </div>
      </div>

      <!-- Model 5 -->
      <div class="model-block" data-model="5">
        <h3>Model 5 <span class="muted">— NB self-repression</span></h3>
        <div class="fields">
          <div class="field">
            <label>β (div exponent)</label>
            <input type="number" step="0.1" data-key="m5_beta" value="4">
          </div>
          <div class="field">
            <label>symmetry (WT/mud/nano)</label>
            <input type="text" data-key="m5_sym" value="0,0.15,0.15">
          </div>
        </div>
        <div class="inline">
          <button data-run="5">Run row</button>
          <button class="secondary tiny" data-share="5">Share row</button>
        </div>
      </div>

      <div class="inline">
        <div class="tiny">tip: shareable links encode all current inputs.</div>
      </div>
    </aside>
  </main>

  <script src="app.js"></script>
</body>
</html>